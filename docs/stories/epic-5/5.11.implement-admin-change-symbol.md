# Story 5.11: Implement Admin Panel - Change Symbol

## Status
Draft

## Story

**As an** admin user,
**I want** to update the token ticker symbol,
**so that** the symbol reflects the current ticker.

## Acceptance Criteria

1. Admin Change Symbol section implemented per Front-End Specification (`docs/front-end-spec.md`)
2. Change Symbol flow implemented per specification (Admin: Change Symbol user flow)
3. Change Symbol form with symbol input
4. Real-time symbol validation (length, characters)
5. Confirmation dialog before update
6. Transaction submission to contract
7. Transaction status indicators (pending, success, error)
8. Symbol display updated throughout UI after successful update
9. Error handling for all edge cases:
   - Invalid symbol format
   - Transaction failure
   - Symbol unchanged
10. UI follows Dashboard - Admin Tab wireframe from specification
11. Accessible (keyboard navigation, screen reader)

## Tasks / Subtasks

- [ ] Add Change Symbol section to Admin tab (AC: 1, 10)
  - [ ] Add Change Symbol option to Corporate Actions section
  - [ ] Implement change symbol form per wireframe
  - [ ] Use dark theme colors
  - [ ] Follow wireframe from specification
- [ ] Implement Change Symbol form (AC: 3)
  - [ ] Add symbol input
  - [ ] Add "Update Symbol" button
  - [ ] Use Input and Button components from Story 5.2
  - [ ] Use Card component for section
- [ ] Implement symbol validation (AC: 4)
  - [ ] Validate symbol format (length, characters)
  - [ ] Real-time validation
  - [ ] Show validation indicators (checkmark/X icon)
  - [ ] Show error messages below invalid inputs
- [ ] Implement confirmation dialog (AC: 5)
  - [ ] Show confirmation dialog before update
  - [ ] Display symbol change details (old symbol, new symbol)
  - [ ] Use Modal component from Story 5.2
  - [ ] Follow confirmation dialog wireframe
- [ ] Implement transaction submission (AC: 6)
  - [ ] Create `frontend/src/lib/contract.ts` (if not exists)
  - [ ] Implement change symbol transaction
  - [ ] Trigger MetaMask popup
  - [ ] Handle transaction approval/rejection
- [ ] Implement transaction status indicators (AC: 7)
  - [ ] Show pending status (spinner)
  - [ ] Show success status (checkmark + message)
  - [ ] Show error status (error icon + message)
  - [ ] Use StatusIndicator component from Story 5.2
- [ ] Implement symbol display update (AC: 8)
  - [ ] Query contract for new symbol
  - [ ] Update symbol display in Balance tab
  - [ ] Update symbol display in all relevant components
  - [ ] Refresh symbol display immediately after success
- [ ] Implement error handling (AC: 9)
  - [ ] Handle invalid symbol format (real-time validation)
  - [ ] Handle transaction failure (show error with retry)
  - [ ] Handle symbol unchanged (check and show message)
  - [ ] Follow error handling from specification
- [ ] Verify accessibility (AC: 11)
  - [ ] Test keyboard navigation
  - [ ] Test screen reader compatibility
  - [ ] Verify focus indicators
  - [ ] Verify form labels

## Dev Notes

### Relevant Source Tree Info
- Admin page: `frontend/src/pages/Admin.tsx`
- Contract interaction: `frontend/src/lib/contract.ts`
- Balance page: `frontend/src/pages/Balance.tsx` (for symbol display)
- Components: Use components from Story 5.2

### Front-End Specification References
- **User Flow:** See `docs/front-end-spec.md` - User Flows > Admin: Change Symbol section
- **Wireframe:** See `docs/front-end-spec.md` - Wireframes & Mockups > Dashboard - Admin Tab section
- **Edge Cases:** See `docs/front-end-spec.md` - User Flows > Admin: Change Symbol > Edge Cases & Error Handling
- **Components:** Use components from Story 5.2

### Architecture Decisions
- Symbol validation before update
- Confirmation dialog before update
- Symbol display updated immediately after success
- Symbol displayed throughout UI

### Key Constraints
- Must follow change symbol flow from specification exactly
- Must validate symbol format
- Must handle all edge cases from specification
- Must use dark theme colors
- Must be accessible

### Testing
- **Test File Location**: `frontend/src/pages/__tests__/Admin.test.tsx`
- **Test Standards**: React Testing Library, Vitest
- **Testing Frameworks**: Vitest with React Testing Library
- **Specific Requirements**: 
  - Test change symbol form
  - Test symbol validation
  - Test confirmation dialog
  - Test transaction submission
  - Test transaction status
  - Test error handling (all edge cases)
  - Test symbol display update
  - Manual testing with contract

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-19 | 1.0 | Initial story creation | Product Owner |

## Dev Agent Record

_To be populated by development agent during implementation_

## QA Results

_To be populated by QA agent_

