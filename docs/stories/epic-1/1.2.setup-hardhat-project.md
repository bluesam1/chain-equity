# Story 1.2: Set Up Hardhat Project

## Status
Ready for Review

## Story

**As a** smart contract developer,
**I want** a Hardhat project configured in the contracts workspace,
**so that** I can develop, test, and deploy Solidity smart contracts with TypeScript support.

## Acceptance Criteria

1. Hardhat initialized in `contracts/` workspace
2. Hardhat configuration file (`hardhat.config.ts`) created with TypeScript
3. Required dependencies installed: Hardhat, OpenZeppelin contracts, ethers.js, TypeScript
4. Project structure created: `src/`, `scripts/`, `test/` directories
5. TypeScript configuration for Hardhat project
6. Basic Hardhat scripts can be compiled and run

## Tasks / Subtasks

- [x] Initialize Hardhat project in contracts workspace (AC: 1)
  - [x] Run `npx hardhat init` in `contracts/` directory
  - [x] Select TypeScript project template
- [x] Install required dependencies (AC: 3)
  - [x] Install `hardhat` as dev dependency
  - [x] Install `@openzeppelin/contracts` (^5.0.0)
  - [x] Install `ethers` (^6.x)
  - [x] Install `@nomicfoundation/hardhat-toolbox`
  - [x] Install TypeScript and type definitions
- [x] Configure Hardhat config file (AC: 2)
  - [x] Update `hardhat.config.ts` with TypeScript configuration
  - [x] Configure network settings (localhost, Sepolia)
  - [x] Configure Solidity compiler version (0.8.x)
- [x] Create project directory structure (AC: 4)
  - [x] Create `src/` directory for contracts
  - [x] Create `scripts/` directory for deployment scripts
  - [x] Create `test/` directory for test files
- [x] Configure TypeScript for Hardhat (AC: 5)
  - [x] Create or update `tsconfig.json` in contracts workspace
  - [x] Configure TypeScript paths and compiler options
- [x] Verify Hardhat setup (AC: 6)
  - [x] Run `npx hardhat compile` to verify compilation
  - [x] Run `npx hardhat test` to verify test setup
  - [x] Verify scripts can be run with TypeScript

## Dev Notes

### Relevant Source Tree Info
- Contracts workspace: `contracts/`
- Contract source: `contracts/src/ChainEquityToken.sol`
- Deployment scripts: `contracts/scripts/deploy.ts`, `contracts/scripts/demo.ts`
- Test files: `contracts/test/ChainEquityToken.test.ts`
- Hardhat config: `contracts/hardhat.config.ts`

### Architecture Decisions
- Hardhat framework for smart contract development
- Solidity 0.8.x for contract development
- OpenZeppelin contracts (^5.0.0) for ERC-20 base and AccessControl
- TypeScript for all scripts and tests
- Hardhat local network for development

### Key Constraints
- Must use Hardhat (not Truffle or Foundry)
- Must use TypeScript for scripts and tests
- Must use OpenZeppelin contracts (^5.0.0)
- Solidity version must be 0.8.x

### Testing
- **Test File Location**: `contracts/test/`
- **Test Standards**: Use Hardhat test framework with TypeScript
- **Testing Frameworks**: Hardhat Test (Mocha/Chai with TypeScript)
- **Specific Requirements**: 
  - Tests must be written in TypeScript
  - Use Hardhat's built-in testing utilities
  - Test files should follow naming convention: `*.test.ts`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-XX | 1.0 | Initial story creation | Product Owner |

## Dev Agent Record

### Agent Model Used
Auto (Agent Router)

### Debug Log References
None - setup completed successfully. Note: There's a known Windows issue with Hardhat showing "Assertion failed" warning at the end of commands, but this doesn't affect functionality.

### Completion Notes List
- Initialized Hardhat project in contracts workspace using TypeScript template
- Installed all required dependencies: Hardhat ^2.27.0, @nomicfoundation/hardhat-toolbox ^6.1.0, @openzeppelin/contracts ^5.4.0, ethers ^6.15.0, TypeScript ^5.9.3, @types/node, ts-node
- Configured hardhat.config.ts with TypeScript, Solidity 0.8.28, optimizer settings (runs: 200), network configurations (hardhat, localhost, sepolia), and proper paths (src/, test/, scripts/)
- Created project directory structure: src/ (for contracts), scripts/ (for deployment scripts), test/ (for test files)
- Updated tsconfig.json with proper TypeScript configuration for Hardhat (es2020 target, commonjs module, strict mode, Hardhat types)
- Added Hardhat scripts to package.json: compile, test, node, deploy, clean
- Verified Hardhat setup: compilation successful (1 Solidity file compiled), all 9 tests pass, TypeScript scripts execute successfully
- Moved default Lock.sol contract to src/ directory as per project structure

### File List
- `contracts/hardhat.config.ts` (created and configured)
- `contracts/tsconfig.json` (updated)
- `contracts/package.json` (updated with dependencies and scripts)
- `contracts/src/` (directory created)
- `contracts/scripts/` (directory created)
- `contracts/test/` (directory created, contains Lock.ts test)
- `contracts/scripts/test-script.ts` (created for verification)
- `contracts/README.md` (generated by Hardhat)
- `contracts/.gitignore` (generated by Hardhat)

## QA Results
_To be populated by QA agent_

