# Story 1.7: Clickable Address Navigation

## Status
Draft

## Story

**As a** user,
**I want** to click on any wallet address in the transaction history,
**so that** I can navigate to view all transactions for that address.

## Acceptance Criteria

1. Make all wallet addresses in transaction history clickable
2. Visual indication that addresses are clickable (hover state, underline, or icon)
3. Clicking an address navigates to transaction history with that address pre-filtered
4. Maintain current filter context when possible (e.g., keep date range filter active)
5. Update URL with address parameter for deep linking support
6. Support clicking addresses in from, to, and event-specific fields
7. Provide clear visual feedback on address hover/click
8. Ensure addresses are accessible via keyboard navigation
9. Support opening address filter in new tab/window (right-click, Ctrl+Click)
10. Display loading state when applying address filter via click

## Tasks / Subtasks

- [ ] Make addresses clickable (AC: 1, 2, 7)
  - [ ] Make all wallet addresses in transaction history clickable
  - [ ] Add hover state (underline or color change)
  - [ ] Add cursor pointer on hover
  - [ ] Use link styling from design system
  - [ ] Add visual feedback on click
- [ ] Implement address click handler (AC: 3, 4, 5)
  - [ ] Navigate to transaction history with address pre-filtered
  - [ ] Maintain current filter context (date range, transaction type)
  - [ ] Update URL with address parameter
  - [ ] Use React Router or URLSearchParams for navigation
- [ ] Support all address fields (AC: 6)
  - [ ] Make from address clickable
  - [ ] Make to address clickable
  - [ ] Make addresses in event-specific fields clickable (e.g., AllowlistUpdate account)
- [ ] Implement keyboard navigation (AC: 8)
  - [ ] Make addresses focusable via Tab
  - [ ] Support Enter/Space to activate address click
  - [ ] Add focus indicators
  - [ ] Ensure proper tab order
- [ ] Support new tab/window (AC: 9)
  - [ ] Support right-click context menu
  - [ ] Support Ctrl+Click (Cmd+Click on Mac) to open in new tab
  - [ ] Support middle-click to open in new tab
  - [ ] Use proper link attributes (target="_blank" when needed)
- [ ] Implement loading state (AC: 10)
  - [ ] Show loading state when applying address filter via click
  - [ ] Display loading indicator during filter application
  - [ ] Show loading state in transaction list

## Dev Notes

### Relevant Source Tree Info
- Transaction row component: `frontend/src/components/TransactionHistory/TransactionRow.tsx` (from Story 1.2)
- Address filter component: `frontend/src/components/TransactionHistory/AddressFilter.tsx` (from Story 1.4)
- Transaction history hook: `frontend/src/hooks/useTransactionHistory.ts` (from Story 1.1)

### Address Click Implementation
**Click Handler:**
```typescript
const handleAddressClick = (address: string, event: React.MouseEvent) => {
  event.stopPropagation(); // Prevent row click
  
  // Update URL with address parameter
  const url = new URL(window.location.href);
  url.searchParams.set('address', address);
  
  // Navigate to new URL (maintains other filters)
  window.history.pushState({}, '', url);
  
  // Apply address filter
  setAddressFilter(address);
};
```

**Maintaining Filter Context:**
- Keep date range filter active
- Keep transaction type filter active
- Only update address filter
- Preserve URL parameters for other filters

### Visual Styling
**Clickable Address:**
- Color: Primary blue (#3B82F6) or link color
- Hover: Underline or color change
- Cursor: Pointer
- Focus: Clear focus ring

**Non-Clickable Address:**
- Color: Text secondary color
- No hover effect
- Cursor: Default

### Keyboard Navigation
- Make addresses focusable with `tabIndex={0}`
- Support Enter/Space to activate
- Add proper ARIA labels
- Ensure focus indicators are visible

### New Tab/Window Support
```typescript
const handleAddressClick = (address: string, event: React.MouseEvent) => {
  if (event.ctrlKey || event.metaKey || event.button === 1) {
    // Open in new tab
    const url = new URL(window.location.href);
    url.searchParams.set('address', address);
    window.open(url.toString(), '_blank');
  } else {
    // Navigate in same tab
    // ... normal navigation
  }
};
```

### Integration Points
- Extends `TransactionRow` component from Story 1.2
- Uses `AddressFilter` component from Story 1.4
- Uses React Router or URLSearchParams for navigation
- Follows existing frontend patterns

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-19 | 1.0 | Initial story creation | John (PM) |

## Dev Agent Record

_To be populated when story is implemented_

## QA Results

_To be populated by QA agent_


